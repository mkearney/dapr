---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r setup, include = FALSE}
knitr::opts_chunk$set(echo = TRUE, collapse = TRUE, comment = "#>")
library(dapr)
```
# dapr <img src="man/figures/logo.png" width="160px" align="right" />

[![Build status](https://travis-ci.org/mkearney/dapr.svg?branch=master)](https://travis-ci.org/mkearney/dapr)
[![CRAN status](https://www.r-pkg.org/badges/version/dapr)](https://cran.r-project.org/package=dapr)
[![Coverage Status](https://codecov.io/gh/mkearney/dapr/branch/master/graph/badge.svg)](https://codecov.io/gh/mkearney/dapr?branch=master)

<!--#![Downloads](https://cranlogs.r-pkg.org/badges/dapr)
#![Downloads](https://cranlogs.r-pkg.org/badges/grand-total/dapr)-->
[![lifecycle](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://www.tidyverse.org/lifecycle/#experimental)

Dependency-free purrr-like apply/map/iterate functions

## Installation

Install the development version from Github with:

``` r
## install remotes pkg if not already
if (!requireNamespace("remotes")) {
  install.packages("remotes")
}

## install from github
remotes::install_github("mkearney/dapr")
```

## {dapr} vs. {base} & {purrr}?
**{dapr}** provides the ease and consistency of [**{purrr}**](https://purrr.tidyverse.org),
including use of `~` and `.x`, without all the dependencies. In other words,
when you want a purrr-like experience but you need a lightweight solution.

## Use

### Vectors

+ **`vap_dbl()`** Iterate and return **numeric** vector.
+ **`vap_int()`** Iterate and return **integer** vector.
+ **`vap_lgl()`** Iterate and return **logical** vector.
+ **`vap_chr()`** Iterate and return **character** vector.

```{r}
## create data
set.seed(12)
d <- replicate(5, rnorm(10), simplify = FALSE)
e <- replicate(5, sample(letters, 10), simplify = FALSE)

## numeric
vap_dbl(d, ~ mean(.x))

## integer
vap_int(d, length)

## logical
vap_lgl(d, ~ max(.x) > 3)

## character
vap_chr(e, paste, collapse = "")
```

### Lists
+ **`lap()`** Iterate and return a **list** vector.

```{r}
## list of strings
lap(e[1:3], ~ paste0(.x, "."))

## list of columns
lap(e[1:3], toupper)
```

### Data frames
+ **`dap()`** Iterate (over columns) and return a **data frame**.
+ **`dapc()`** Iterate over **columns**.
+ **`dapr()`** Iterate over **rows**.
+ **`dapc_if()`** Iterate over **columns** meeting logical test.

```{r}
## some data
d <- data.frame(
  a = letters[1:5],
  b = rnorm(5),
  c = rnorm(5),
  stringsAsFactors = FALSE
)

## default applies to columns
dap(d[-1], ~ round(.x, 2))

## column explicit
dapc(d[-1], ~ round(.x, 2))

## rows
dapr(d[-1], round, 3)

## predicate columns
dapc_if(d, is.numeric, ~ round(.x, 1))
```
